<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>WODsApp - Workout Tracker</title>
    <script>
      // GitHub Pages 404 handler for React Router SPA
      // Redirects to index.html and preserves the route
      (function() {
        var path = window.location.pathname;
        
        // Determine base path - check if we're on GitHub Pages subdirectory
        var base = '/';
        var route = path;
        
        if (path.startsWith('/wodsapp/')) {
          base = '/wodsapp/';
          route = path.replace(base, '');
        } else if (path.startsWith('/wodsapp')) {
          base = '/wodsapp/';
          route = '/';
        } else {
          // Custom domain or root - use path as-is
          route = path;
        }
        
        if (!route.startsWith('/')) {
          route = '/' + route;
        }
        
        // Preserve query string and hash
        var search = window.location.search;
        var hash = window.location.hash;
        
        // Store the intended route in sessionStorage
        // React Router will pick this up and navigate to it
        if (route && route !== '/') {
          sessionStorage.setItem('githubPages404Redirect', route + search + hash);
        }
        
        // Redirect to index.html
        window.location.replace(base + 'index.html');
      })();
    </script>
  </head>
  <body>
    <p>Redirecting...</p>
  </body>
</html>
